<!DOCTYPE html>

<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Webpack Pluginåˆ¶ä½œ2-åœ¨æ‰“åŒ…ç›®å½•è¾“å‡ºæ–‡ä»¶åˆ—è¡¨</title>
    <meta name="description" content="ç°åœ¨åˆ†æä¸€æ³¢å®˜æ–¹æ–‡æ¡£çš„ç®€å•ä¾‹å­ï¼Œè¿™ä¸ªä¾‹å­æŠŠæ‰€æœ‰çš„æ–‡ä»¶åˆ—è¡¨è¾“å‡ºåˆ°ä¸€ä¸ªmarkdownæ–‡ä»¶ã€‚">

    <meta property="og:url" content="https://nicelee.top/blog/2021/10/13/webpack-diy-plugins-and-loaders-2/">
    <meta property="og:site_name" content="NiceLeeçš„åšå®¢">
    <meta property="og:title" content="Webpack Pluginåˆ¶ä½œ2-åœ¨æ‰“åŒ…ç›®å½•è¾“å‡ºæ–‡ä»¶åˆ—è¡¨">
    <meta property="og:description" content="ç°åœ¨åˆ†æä¸€æ³¢å®˜æ–¹æ–‡æ¡£çš„ç®€å•ä¾‹å­ï¼Œè¿™ä¸ªä¾‹å­æŠŠæ‰€æœ‰çš„æ–‡ä»¶åˆ—è¡¨è¾“å‡ºåˆ°ä¸€ä¸ªmarkdownæ–‡ä»¶ã€‚">
    <meta property="og:image" content="https://nicelee.top/favicon.ico?">
    <meta property="og:image:type" content="image/x-icon">
    
    <link rel="shortcut icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="stylesheet" href="/css/font-awesome.min.css ">
    <link rel="stylesheet" href="/css/font-ali.css?v=1.2 ">
    <link rel="stylesheet" href="/css/main.css?v=1.1 ">
    <link rel="canonical" href="https://nicelee.top/blog/2021/10/13/webpack-diy-plugins-and-loaders-2/">
    <link rel="alternate" type="application/rss+xml" title="NiceLeeã®Blog" href="https://nicelee.top/feed.xml ">

	

    <script>
    // ç™¾åº¦ç»Ÿè®¡ä»£ç 
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?11f780e4e4ccd4e99b101eac776e93e4";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script><script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<script type='text/javascript'>
  // smartlookç»Ÿè®¡ä»£ç 
  window.smartlook||(function(d) {
    var o=smartlook=function(){ o.api.push(arguments)},h=d.getElementsByTagName('head')[0];
    var c=d.createElement('script');o.api=new Array();c.async=true;c.type='text/javascript';
    c.charset='utf-8';c.src='https://web-sdk.smartlook.com/recorder.js';h.appendChild(c);
    })(document);
    smartlook('init', '19ece82e2fc254b6b9cb148c545244ca1fc2ade2', { region: 'eu' });
</script>



</head>

    <link rel="stylesheet" href="/sources/live2d/css/live2d.css" />
  <body>
	
		
		<script type="text/javascript" src="/js/ribbon.min.js "></script>
		
	
	
    <header id="top">
    <div class="wrapper">
        <a href="/blog/" class="brand awsome-font">NiceLeeã®Blog</a>
        <small>ç”¨çˆ±å‘ç”µ bilibili~</small>
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
				<li onclick="showdiv()" >
                    <a href="#">
                    <i class="fa fa-search">æœç´¢</i>
                    </a>
                </li>
                <li>
                    
                    <a href="/blog/">
                    
                        <i class="fa fa-home"></i>ä¸»é¡µ
                    </a>
                </li>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                    <li>
                        <a href="/blog/archive/">
                        
                            <i class="fa fa-archive"></i>å½’æ¡£
                        </a>
                    </li>
                
                    
                    <li>
                        <a href="/ilikemusic/">
                        
                            <i class="fa fa-music"></i>éŸ³ä¹
                        </a>
                    </li>
                
                    
                    <li>
                        <a href="/collect/">
                        
                            <i class="fa fa-bookmark"></i>æ”¶è—
                        </a>
                    </li>
                
                    
                
                    
                
                    
                
                    
                
                    
                    <li>
                        <a href="/blog/timeline/">
                        
                            <i class="fa fa-clock-o"></i>æ—¶é—´è½´
                        </a>
                    </li>
                
                    
                
                    
                
                    
                    <li>
                        <a href="/about/">
                        
                            <i class="fa fa-info-circle"></i>å…³äº
                        </a>
                    </li>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                				
				
            </ul>
        </nav>
    </div>
</header>


        <div class="page clearfix" post>
    <div class="left">
        <h1>Webpack Pluginåˆ¶ä½œ2-åœ¨æ‰“åŒ…ç›®å½•è¾“å‡ºæ–‡ä»¶åˆ—è¡¨</h1>
        <div class="label">

            <div class="label-card">
                <i class="fa fa-calendar"></i>2021-10-13
            </div>

            <div class="label-card">
                <i class="fa fa-user"></i>nIceLee
                
            </div>
            <div class="label-card">
                <p>é˜…è¯»ï¼š<span id="busuanzi_value_page_pv1"></span></p>
            </div>
            <div class="label-card">
                
            </div>

            <div class="label-card">
            


<!-- <span class="point">â€¢</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/blog/category/#æŠ€æœ¯å­¦ä¹ " title="Category: æŠ€æœ¯å­¦ä¹ " rel="category">æŠ€æœ¯å­¦ä¹ </a>
    
  

  <!-- <span class="point">â€¢</span> -->
</span>


            </div>

            <div class="label-card">
            
<!-- <span class="point">â€¢</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <!--a href="/blog/tag/#JavaScript" title="Tag: JavaScript" rel="tag">JavaScript</a-->
        <a href="/blog/tag/#JavaScript" title="Tag: JavaScript" rel="tag">JavaScript</a>
    
  

</span>

            </div>

        </div>
        <hr>
        <article itemscope itemtype="http://schema.org/BlogPosting">
        <ul id="markdown-toc">
  <li><a href="#å‡†å¤‡å·¥ä½œ" id="markdown-toc-å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</a></li>
  <li><a href="#æ’ä»¶å®ç°" id="markdown-toc-æ’ä»¶å®ç°">æ’ä»¶å®ç°</a></li>
  <li><a href="#ç®€å•åˆ†æ" id="markdown-toc-ç®€å•åˆ†æ">ç®€å•åˆ†æ</a>    <ul>
      <li><a href="#ä¸¤ä¸ªæ¦‚å¿µ" id="markdown-toc-ä¸¤ä¸ªæ¦‚å¿µ">ä¸¤ä¸ªæ¦‚å¿µ</a></li>
      <li><a href="#è¯´è¯´æˆ‘çš„ç†è§£" id="markdown-toc-è¯´è¯´æˆ‘çš„ç†è§£">è¯´è¯´æˆ‘çš„ç†è§£</a></li>
    </ul>
  </li>
  <li><a href="#æºä»£ç " id="markdown-toc-æºä»£ç ">æºä»£ç </a></li>
  <li><a href="#ç³»åˆ—æ–‡ç« " id="markdown-toc-ç³»åˆ—æ–‡ç« ">ç³»åˆ—æ–‡ç« </a></li>
</ul>
<p>ç°åœ¨åˆ†æä¸€æ³¢å®˜æ–¹æ–‡æ¡£çš„ç®€å•ä¾‹å­ï¼Œè¿™ä¸ªä¾‹å­æŠŠæ‰€æœ‰çš„æ–‡ä»¶åˆ—è¡¨è¾“å‡ºåˆ°ä¸€ä¸ªmarkdownæ–‡ä»¶ã€‚</p>

<h2 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h2>
<p>æœ¬æ–‡çš„å·¥ç¨‹ç¯å¢ƒæ‰¿æ¥<a href="/blog/2021/10/12/webpack-diy-plugins-and-loaders-1/">ä¸Šæ–‡</a><br />
ä¸ºäº†ä½¿å¾—è¾“å‡ºç›®å½•æ›´åŠ ä¸°å¯Œï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ª<code class="language-plaintext highlighter-rouge">html-webpack-plugin</code>ï¼Œä½¿å¾—è¾“å‡ºæ–‡ä»¶ç›®å½•æ›´åŠ ä¸°å¯Œã€‚<br />
Â Â Â Â + npm i -D html-webpack-plugin<br />
Â Â Â Â + webpack.config.jsä¸­å¼•å…¥æ’ä»¶<br />
Â Â Â Â + webpack.config.jsä¸­é…ç½®æ’ä»¶</p>

<p>è¿™ä¸ªç®€å•çš„å·¥ç¨‹ç›®å½•å¦‚ä¸‹:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- build
- node_modules
- package.json
- plugins
    - 0.createLicense.js
- loaders
- src
    - index.js
- LICENSE
</code></pre></div></div>

<p>æˆ‘ä»¬çœ‹ä¸€ä¸ªå®˜æ–¹çš„<a href="https://webpack.js.org/contribute/writing-a-plugin/#example">ä¾‹å­</a>ï¼Œå¹¶ç¨åšåˆ†æã€‚</p>

<h2 id="æ’ä»¶å®ç°">æ’ä»¶å®ç°</h2>
<p>å†æ¥ç®€å•å›é¡¾ä¸€ä¸‹æ€ä¹ˆå®ç°å¹¶ä½¿ç”¨ä¸€ä¸ªæ’ä»¶ï¼Œä»¥åå°±ä¸å†å¤è¿°äº†ã€‚</p>
<ul>
  <li>
    <p>å®ç°<code class="language-plaintext highlighter-rouge">plugin/1.createFileList.js</code>ï¼Œ å†…å®¹å¦‚ä¸‹ï¼š</p>

    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">FileListPlugin</span> <span class="p">{</span>
    <span class="c1">// è®¾ç½®é»˜è®¤é…ç½®</span>
    <span class="kd">static</span> <span class="nx">defaultOptions</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">outputFile</span><span class="p">:</span> <span class="dl">'</span><span class="s1">assets.md</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">};</span>
    <span class="kd">constructor</span><span class="p">(</span><span class="nx">options</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
        <span class="c1">// æ¥æ”¶å‚æ•°ç”Ÿæˆé…ç½®</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span><span class="nx">FileListPlugin</span><span class="p">.</span><span class="nx">defaultOptions</span><span class="p">,</span> <span class="p">...</span><span class="nx">options</span> <span class="p">};</span>
    <span class="p">}</span>
    <span class="nx">apply</span><span class="p">(</span><span class="nx">compiler</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">pluginName</span> <span class="o">=</span> <span class="nx">FileListPlugin</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
        <span class="c1">// ä»compileré‡Œå–å‡ºåé¢è¦ç”¨çš„ä¸œè¥¿</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">hooks</span><span class="p">,</span> <span class="nx">webpack</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">compiler</span><span class="p">;</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">Compilation</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">webpack</span><span class="p">;</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">RawSource</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">sources</span><span class="p">;</span>
        <span class="c1">// ä¸ºäº†è·å¾—ä¼ å…¥çš„compilationè¿™ä¸ªå…³é”®å¯¹è±¡, æˆ‘ä»¬å¿…é¡»è¿›è¡Œä¸€æ¬¡hook</span>
        <span class="c1">// æˆ‘ä»¬åº”å½“å°½æ—©hookï¼Œäºæ˜¯é€‰æ‹©äº† hooks.thisCompilation</span>
        <span class="nx">hooks</span><span class="p">.</span><span class="nx">thisCompilation</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="nx">pluginName</span><span class="p">,</span> <span class="p">(</span><span class="nx">compilation</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="c1">// æˆ‘ä»¬åœ¨assetséƒ½å·²ç»å·®ä¸å¤šå¤„ç†å¥½çš„é˜¶æ®µ(Compilation.PROCESS_ASSETS_STAGE_SUMMARIZE)</span>
            <span class="c1">//   éå†assetsï¼Œå°†å®ƒä»¬çš„åç§°æ±‡åœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ–‡ä»¶</span>
            <span class="c1">//   å°†æ–°æ–‡ä»¶æäº¤ç»™webpack</span>
            <span class="nx">compilation</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">processAssets</span><span class="p">.</span><span class="nx">tap</span><span class="p">({</span>
                <span class="na">name</span><span class="p">:</span> <span class="nx">pluginName</span><span class="p">,</span>
                <span class="na">stage</span><span class="p">:</span> <span class="nx">Compilation</span><span class="p">.</span><span class="nx">PROCESS_ASSETS_STAGE_SUMMARIZE</span><span class="p">,</span>
            <span class="p">},</span> <span class="p">(</span><span class="nx">assets</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="kd">const</span> <span class="nx">content</span> <span class="o">=</span>
                    <span class="dl">'</span><span class="s1"># In this build:</span><span class="se">\n\n</span><span class="dl">'</span> <span class="o">+</span>
                    <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">assets</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">filename</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s2">`- </span><span class="p">${</span><span class="nx">filename</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">);</span>
                <span class="nx">compilation</span><span class="p">.</span><span class="nx">emitAsset</span><span class="p">(</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">outputFile</span><span class="p">,</span>
                    <span class="k">new</span> <span class="nx">RawSource</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span>
                <span class="p">);</span>
            <span class="p">}</span>
            <span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">FileListPlugin</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>åœ¨<code class="language-plaintext highlighter-rouge">webpack.config.js</code>ä¸­å¼•å…¥å¹¶ä½¿ç”¨è¯¥æ’ä»¶</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>const HtmlWebpackPlugin = require('html-webpack-plugin')
const CreateLicensePlugin = require('./plugins/0.createLicense')
+ const FileListPlugin = require('./plugins/1.createFileList')
...
    plugins: [
        new HtmlWebpackPlugin(),
        new CreateLicensePlugin(),
+        new FileListPlugin(),
    ],
</code></pre></div>    </div>
  </li>
  <li>
    <p>ç»“æœå±•ç¤º<br />
æœ€ç»ˆæˆ‘ä»¬ä¼šåœ¨buildæ–‡ä»¶å¤¹ä¸‹å‘ç°ä¸€ä¸ªassets.mdæ–‡ä»¶ï¼Œå…¶å†…å®¹ä¸ºï¼š</p>

    <div class="language-md highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh"># In this build:</span>
<span class="p">
-</span> bundle.js
<span class="p">-</span> index.html
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="ç®€å•åˆ†æ">ç®€å•åˆ†æ</h2>
<p>å…·ä½“çš„çœ‹ä»£ç é‡Œçš„æ³¨é‡Šå°±æœ‰äº†ï¼Œæ„Ÿè§‰æ²¡å•¥å¥½è¯´çš„ã€‚</p>
<h3 id="ä¸¤ä¸ªæ¦‚å¿µ">ä¸¤ä¸ªæ¦‚å¿µ</h3>
<p>è¿™ä¸ªæ’ä»¶å‡ºç°äº†å¦ä¸€ä¸ªç‰¹åˆ«é‡è¦çš„æ¦‚å¿µ<code class="language-plaintext highlighter-rouge">compilation</code>ã€‚<br />
å…ˆä¸å»çº ç»“é‚£äº›ç»†ææœ«èŠ‚ï¼Œæˆ‘ä»¬è„‘æµ·é‡Œè¦æœ‰ä¸ªå°è±¡ï¼š</p>

<ul>
  <li>æœ‰ä¸¤ä¸ªæ ¸å¿ƒçš„ä¸œè¥¿ï¼Œä¸€ä¸ª<code class="language-plaintext highlighter-rouge">compiler</code>ã€ä¸€ä¸ª<code class="language-plaintext highlighter-rouge">compilation</code>ï¼Œå®ƒä»¬èº«ä¸ŠæŒ‚äº†ç›¸å…³æµç¨‹çš„å„ç§é’©å­ï¼Œä»¥åŠå¯èƒ½ä¼šç”¨åˆ°çš„ä¸€äº›é‡è¦å±æ€§ã€‚</li>
</ul>

<p>å®˜æ–¹æ–‡æ¡£è¯´ç†è§£è¿™ä¸¤ä¸ªä¸œè¥¿æ˜¯<strong>an important first step in extending the webpack engine</strong>ï¼Œä½†å¹¶æ²¡æœ‰å¯¹å®ƒä»¬åšå®è´¨æ€§çš„è¯¦ç»†è¯´æ˜ã€‚
åœ¨Compilationç« èŠ‚æœ‰ç‚¹å¹²è´§ï¼Œå®ƒæ˜¯è¿™æ ·è¯´çš„ï¼š</p>
<blockquote>
  <p>The Compilation module is used by the Compiler to create new compilations (or builds).
A compilation instance has access to all modules and their dependencies (most of which are circular references). 
It is the literal compilation of all the modules in the dependency graph of an application. 
During the compilation phase, modules are loaded, sealed, optimized, chunked, hashed and restored.</p>
</blockquote>

<p>æ„æ€å¤§æ¦‚æ˜¯ï¼ŒCompilationæ˜¯è¢«Compilerç”¨æ¥ç¼–è¯‘/æ‰“åŒ…çš„ã€‚
Compilationç”¨æ¥å¤„ç†æ¨¡å—moduleçš„ç›¸å…³äº‹åŠ¡ã€‚
è¿™ä¸ªå°±å‰å®³äº†ï¼Œå› ä¸ºwebpackçš„ä¸œè¥¿éƒ½æ˜¯æ¨¡å—åŒ–çš„ã€‚</p>

<p>å¹²è¯´æ²¡ç”¨ï¼Œæˆ‘ä»¬å¤§è‡´çœ‹çœ‹å®ƒä»¬æŒ‚çš„é’©å­ï¼Œåº”è¯¥å¿ƒé‡Œæœ‰ç‚¹æ•°äº†</p>
<ul>
  <li>Compiler:       xx environmentã€initializeã€xxRunã€ xx compileã€xx compilationã€xx makeã€ xx emit</li>
  <li>Compilation:    xxModuleã€xx sealã€xx optimizeã€xx chunkã€ xxHashã€xxAssets</li>
</ul>

<h3 id="è¯´è¯´æˆ‘çš„ç†è§£">è¯´è¯´æˆ‘çš„ç†è§£</h3>
<p>æˆ–è€…æˆ‘å¯ä»¥é€šè¿‡å¦å¤–çš„åšæ³•é‡å†™è¿™ä¸ªä¾‹å­ï¼Œä»¥ä¾¿å±•ç¤ºæˆ‘çš„æ€è€ƒå›è·¯ã€‚<br />
é¦–å…ˆï¼Œå…ˆç¡®å®šä¸€ä¸ªå‰æï¼š</p>
<blockquote>
  <p>æˆ‘ä»¬<strong>åªå…³æ³¨æœ€ç»ˆçš„æ‰“åŒ…</strong>ï¼Œ<strong>ä¸è€ƒè™‘</strong>ä¸å…¶å®ƒæ’ä»¶çš„é…åˆï¼Œä¸è€ƒè™‘çƒ­é‡è½½ç­‰ç­‰ã€‚</p>
</blockquote>

<p>æˆ‘ä»¬è¦å–åˆ°æœ€ç»ˆçš„æ–‡ä»¶åˆ—è¡¨ï¼Œé‚£ä¹ˆè‚¯å®šè¦åœ¨é¡¹ç›®é åçš„é˜¶æ®µã€‚<br />
å¦‚æœå¯ä»¥ï¼Œæˆ‘æƒ³ç›´æ¥hook compiler.<strong>done</strong>ã€‚<br />
ä½†è¿™æ˜¯ä¸å¯è¡Œçš„ï¼Œå› ä¸ºcompilerå¯¹è±¡ä¸Šæ²¡æœ‰æˆ‘ä»¬éœ€è¦çš„è¾“å‡ºæ–‡ä»¶ä¿¡æ¯ï¼Œè€Œdoneçš„hookå›è°ƒä»…ä»…ä¼ å‡ºæ¥ä¸€ä¸ªæŒ‡ç¤ºæˆåŠŸè¿˜æ˜¯å¤±è´¥çš„stateä¿¡æ¯ã€‚<br />
æˆ‘ä»¬è¦æ‰¾é‚£ä¹ˆä¸€ä¸ªhookï¼Œå®ƒçš„å‘å¸ƒå‡½æ•°çš„å›è°ƒä¼ å‚ï¼š</p>
<ul>
  <li>åŒ…å«æœ‰è¾“å‡ºæ–‡ä»¶ä¿¡æ¯assetsï¼›</li>
  <li>æˆ–è€…æ˜¯åŒ…å«compilationä¹Ÿè¡Œï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥é€šè¿‡compilation.getAssets()æ–¹æ³•è·å–åˆ°è¾“å‡ºæ–‡ä»¶ä¿¡æ¯ã€‚</li>
</ul>

<p>ä¸ºäº†å’Œä¾‹å­è¿›è¡ŒåŒºåˆ«ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„hookæ˜¯compiler.hooks.afterEmitï¼Œè¿™å¯¹åº”çš„é˜¶æ®µæ˜¯åœ¨webpackå·²ç»å°†æ–‡ä»¶å…¨éƒ¨è¾“å‡ºåˆ°buildæ–‡ä»¶å¤¹ä¹‹åã€‚<br />
ä»¥ä¸‹æ˜¯æŒ‰ç…§è¿™ä¸€æ€è·¯é‡å†™çš„pluginï¼š</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">resolve</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">fs</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">class</span> <span class="nx">FileListPlugin</span> <span class="p">{</span>
    <span class="kd">static</span> <span class="nx">defaultOptions</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">outputFile</span><span class="p">:</span> <span class="dl">'</span><span class="s1">assets.md</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">};</span>
    <span class="kd">constructor</span><span class="p">(</span><span class="nx">options</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span><span class="nx">FileListPlugin</span><span class="p">.</span><span class="nx">defaultOptions</span><span class="p">,</span> <span class="p">...</span><span class="nx">options</span> <span class="p">};</span>
    <span class="p">}</span>
    <span class="nx">apply</span><span class="p">(</span><span class="nx">compiler</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">pluginName</span> <span class="o">=</span> <span class="nx">FileListPlugin</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
        <span class="nx">compiler</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">afterEmit</span><span class="p">.</span><span class="nx">tap</span><span class="p">(</span><span class="nx">pluginName</span><span class="p">,</span> <span class="p">(</span><span class="nx">compilation</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">content</span> <span class="o">=</span>
                    <span class="dl">'</span><span class="s1"># In this build(diy):</span><span class="se">\n\n</span><span class="dl">'</span> <span class="o">+</span>
                    <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">compilation</span><span class="p">.</span><span class="nx">getAssets</span><span class="p">())</span>
                        <span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">filename</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s2">`- </span><span class="p">${</span><span class="nx">filename</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">);</span>
            <span class="kd">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">compiler</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">output</span><span class="p">.</span><span class="nx">path</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">outputFile</span><span class="p">)</span>
            <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">content</span><span class="p">)</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">FileListPlugin</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="æºä»£ç ">æºä»£ç </h2>
<p><a href="https://github.com/nicennnnnnnlee/webpack-plugin-loader-examples">https://github.com/nicennnnnnnlee/webpack-plugin-loader-examples</a></p>

<h2 id="ç³»åˆ—æ–‡ç« ">ç³»åˆ—æ–‡ç« </h2>
<ul>
  <li><a href="/blog/2021/10/12/webpack-diy-plugins-and-loaders-0/">0-åº</a></li>
  <li><a href="/blog/2021/10/12/webpack-diy-plugins-and-loaders-1/">1-å°†LICENSEæ‰“åŒ…åˆ°ç›®çš„æ–‡ä»¶å¤¹</a></li>
  <li><a href="/blog/2021/10/13/webpack-diy-plugins-and-loaders-2/">2-åœ¨æ‰“åŒ…ç›®å½•è¾“å‡ºæ–‡ä»¶åˆ—è¡¨</a></li>
  <li><a href="/blog/2021/10/13/webpack-diy-plugins-and-loaders-3/">3-é‡å†™LICENSEæ‰“åŒ…æ’ä»¶</a></li>
  <li><a href="/blog/2021/10/13/webpack-diy-plugins-and-loaders-4/">4-åœ¨index.htmlé‡Œæ·»åŠ ä¸€æ¡å¤‡æ³¨</a></li>
  <li><a href="/blog/2021/10/13/webpack-diy-plugins-and-loaders-5/">5-ä¸å…¶å®ƒæ’ä»¶è¿›è¡Œäº¤äº’</a></li>
  <li><a href="/blog/2021/10/13/webpack-diy-plugins-and-loaders-6/">6-ä¿®æ”¹å…¶å®ƒæ’ä»¶çš„é…ç½®</a></li>
  <li><a href="/blog/2021/10/14/webpack-diy-plugins-and-loaders-7/">7-åšä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹çš„loader</a></li>
</ul>


        </article>
        <hr>

        
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
        
        

        <div class="post-recent">
    <div class="pre">
        
        <p><strong>ä¸Šä¸€ç¯‡</strong> <a href="/blog/2021/10/12/webpack-diy-plugins-and-loaders-1/">Webpack Pluginåˆ¶ä½œ1-å°†LICENSEæ‰“åŒ…åˆ°ç›®çš„æ–‡ä»¶å¤¹</a></p>
        
    </div>
    <div class="nex">

        
        <p><strong>ä¸‹ä¸€ç¯‡</strong> <a href="/blog/2021/10/13/webpack-diy-plugins-and-loaders-3/">Webpack Pluginåˆ¶ä½œ3-é‡å†™LICENSEæ‰“åŒ…æ’ä»¶</a></p>
        
    </div>
</div>


        <!-- <h2 id="comments">è¯„è®º</h2>  
        



 -->


    </div>
    <button class="anchor"><i class="fa fa-anchor"></i></button>
    <div class="right">
        <div class="wrap">

            <!-- Content -->
            <div class="side content">
                <div>
                    å†…å®¹
                </div>
                <ul id="content-side" class="content-ul">
                    
                    <!-- <li><a href="#comments">è¯„è®º</a></li> -->
                </ul>
            </div>
			
            <!-- å…¶ä»–divæ¡†æ”¾åˆ°è¿™é‡Œ -->
            <!-- <div class="side">bbbb</div> -->
        </div>
    </div>
</div>
<script>
/**
 * target _blank
 */
(function() {
    var aTags = document.querySelectorAll('article a:not([id])')
    for (var i = 0; i < aTags.length; i++) {
        aTags[i].setAttribute('target', '_blank')
    }

}());
</script>
<script src="/js/pageContent.js " charset="utf-8"></script>


    <footer class="site-footer">


    <div class="wrapper">
        <p class="description">
             è¿™æ˜¯ä¸€ä¸ªç¼ºçˆ±çš„åšå®¢(à¹‘â€¾ ê‡´ â€¾à¹‘)ï¼ 
        </p>
        <p class="contact">
            è”ç³»æˆ‘: 
            <a href="https://github.com/nICEnnnnnnnLee" title="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a>         
			<span onclick="copyToClipboard('https://nicelee.top/feed.xml')"><a href="#">è®¢é˜…æˆ‘<i class="fa fa-gg"></i></a></span>
        </p>
        <p>
            æ€»pv:<span id="busuanzi_value_site_pv"></span>ï¼Œuv:<span id="busuanzi_value_site_uv"></span>ï¼Œæœ¬é¡µpv:<span id="busuanzi_value_page_pv"></span>
        </p>
        <p class="power">
            <span>
            æœ‰ç”¨é“¾æ¥ï¼š
                <a href="http://www.bejson.com/" target="_blank">BeJSON</a> &nbsp;&nbsp;
                <a href="http://site.ip138.com/"  target="_blank">IPæˆ–åŸŸåæŸ¥è¯¢</a> &nbsp;&nbsp;
                <a href="http://ping.chinaz.com/"  target="_blank">å„åœ°ping</a> &nbsp;&nbsp;
                <a href="https://tool.lu/"  target="_blank">åœ¨çº¿å·¥å…·</a> &nbsp;&nbsp; 
                <a href="https://www.aliyun.com/"  target="_blank">é˜¿é‡Œäº‘</a> &nbsp;&nbsp; 
                <a href="http://patorjk.com/software/taag/"  target="_blank">Textè½¬FIGlet</a> &nbsp;&nbsp; 
                <a href="https://vercel.com/dashboard"  target="_blank">Vercel</a> &nbsp;&nbsp;
                <a href="https://dash.cloudflare.com/"  target="_blank">Cloudflare</a> &nbsp;&nbsp;
                <a href="https://www.webfx.com/tools/emoji-cheat-sheet/"  target="_blank">EmojiğŸ˜³</a> &nbsp;&nbsp;
                <a href="https://www.color-hex.com/"  target="_blank">Color-hex</a> &nbsp;&nbsp;
            </span>
        </p>
        <p class="power">
            <span>
            é™¤éå¦æœ‰æ³¨æ˜ï¼Œå¦åˆ™æœ¬ç½‘ç«™ä¸Šçš„å†…å®¹å¯æŒ‰ <a href="http://creativecommons.org/licenses/by-nc/4.0/"  target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…è®¸å¯åè®®è®¸å¯</a> æˆ–æ›´æ–°ç‰ˆæœ¬ä½¿ç”¨ã€‚
            </span>
        </p>
        <p class="power">
            <span>
                å»ºç«™å£°æ˜è¯¦è§ <a href="/about/#å…³äºä¸ªäººåšå®¢">[å…³äº]</a>. <a href="/sitemap.xml">[ç«™ç‚¹åœ°å›¾]</a>. 
            </span>
            
        </p>
        <p class="power beian">
        </p>
		<p class="power">
            <span>
                Site powered by <a href="https://jekyllrb.com/">Jekyll</a>.
            </span>
            <span>
                Theme designed by <a href="https://github.com/Gaohaoyang">HyG</a>.
            </span>
        </p>
        
		
    </div>
</footer>


<!-- mask start -->
<div id="searchBg"></div>
<div id="searchDiv">
	<input id="searchContent" type="text" onkeypress="if(event.keyCode==13) { search();return false;}" value=""/></input>
    <div id="searchBtn" onclick="search();" /><i class="fa fa-search"></i></div>
	<span onclick="hidediv();" class="close"></span>
</div>
<!-- mask end -->
<!-- live2d begin -->
<div id="landlord">
    <div class="message" style="opacity:0"></div>
    <canvas id="live2d" width="280" height="250" class="live2d"></canvas>
    <div class="hide-button">éšè—</div>
</div>
<!-- live2d end -->
<script type='text/javascript' src='/js/jquery.min.js '></script>
<script type='text/javascript'>
function search(){	
	var str = document.getElementById("searchContent").value;
	//console.log(str);
	setLocalStorage("blogSearchKey",str);
	hidediv();
	window.location.href="/blog/archive/";
}
function showdiv() {
	//alert("è°ƒç”¨äº†showdiv()å‡½æ•°");
	document.getElementById("searchBg").style.display ="block";
	document.getElementById("searchDiv").style.display ="block";

	//$('body').css("overflow", "hidden");
	document.getElementsByTagName('body')[0].setAttribute("overflow", "hidden");
}
function hidediv() {
	document.getElementById("searchBg").style.display = 'none';
	document.getElementById("searchDiv").style.display = 'none';
	//$('body').css("overflow", "auto");
	document.getElementsByTagName('body')[0].setAttribute("overflow", "hidden");
}
////////////////////////////useful function //////////////////////////////////////
//å†™cookies
function setLocalStorage(name,value)
{
	localStorage.setItem(name, JSON.stringify(value));
}
//è¯»cookies
function getLocalStorage(name)
{
	return JSON.parse(localStorage.getItem(name));
}
//åˆ cookies
function delLocalStorage(name)
{
	localStorage.setItem(name, JSON.stringify(""));
}
function copyToClipboard (text) {
    if(text.indexOf('-') !== -1) {
        var arr = text.split('-');
        text = arr[0] + arr[1];
    }
    var textArea = document.createElement("textarea");
      textArea.style.position = 'fixed';
      textArea.style.top = '0';
      textArea.style.left = '0';
      textArea.style.width = '2em';
      textArea.style.height = '2em';
      textArea.style.padding = '0';
      textArea.style.border = 'none';
      textArea.style.outline = 'none';
      textArea.style.boxShadow = 'none';
      textArea.style.background = 'transparent';
      textArea.value = text;
      document.body.appendChild(textArea);
      textArea.select();
	//alert("è°ƒç”¨äº†å¤åˆ¶å‰ªè´´æ¿å‡½æ•°");
      try {
        var successful = document.execCommand('copy');
        var msg = successful ? 'Rssæºå·²æˆåŠŸå¤åˆ¶åˆ°å‰ªè´´æ¿' : 'RSSæºä¸º:https://nicelee.top/feed.xml';
		//alert(msg);
		showTips(msg);
      } catch (err) {
		//console.log(err);
        //alert('è¯¥æµè§ˆå™¨ä¸æ”¯æŒç‚¹å‡»å¤åˆ¶åˆ°å‰ªè´´æ¿');
		showTips('RSSæºä¸º:https://nicelee.top/feed.xml');
      }

      document.body.removeChild(textArea);
}
/*
<!--  ç‰ˆæƒç»´æŠ¤  -->
function addLink() {
//alert("!!!");
    var body_element = document.body;
    var selection;
    selection = window.getSelection();
    if((selection + "").indexOf("/feed.xml") != -1){
        return;
    }
	if(selection == ""){
		return;
	}
    var locationHref=document.location.href;
    var appendLink="\r\n------------------------------\r\n åŸæ–‡å‡ºè‡ª[ NiceLeeçš„ä¸ªäººåšå®¢ ] è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥: <a href='"+locationHref+"'>"+locationHref+"</a>";
    if (window.clipboardData) { // Internet Explorer
        //console.log("è°ƒç”¨åŸç”Ÿå‡½æ•°");
        var copytext = selection + appendLink;
        window.clipboardData.setData ("Text", copytext);
        return false;
    } else {
        //console.log("å¤æ‚çš„å¥—è·¯");
        var copytext = selection + appendLink;
        var newdiv = document.createElement('div');
        newdiv.style.position='absolute';
        newdiv.style.left='-99999px';
        body_element.appendChild(newdiv);
        newdiv.innerHTML = "<pre>" +copytext + "</pre>";
        selection.selectAllChildren(newdiv);
        window.setTimeout(function() {
        	body_element.removeChild(newdiv);
        },0);
    }
}
document.oncopy = addLink;
*/

//contetnä¸ºè¦æ˜¾ç¤ºçš„å†…å®¹  
function showTips( content ){  
	//alert("è°ƒç”¨äº†å¤åˆ¶æç¤ºæ¶ˆæ¯å‡½æ•°");
	//alert("å†…å®¹ä¸º"+ content);
    //çª—å£çš„å®½åº¦  
	//alert(content);
	var width = 250;
	var x  = $(window).width()/2 - width/2;	
	var y = $(window).height()/2 -20;
	var $i = $("<span/>").text(content);
	$i.css({
		"z-index": 999999999999999999999999999,
		"top": y,
		"left": x,
		"position": "absolute",
		"font-weight": "bold",
		'padding'   : '3px 5px',  
		'background': '#8FBC8F',  
		'font-size' : 12 + 'px',  
		'margin'    : '0 auto',  
		'text-align': 'center',  
		'width'     : width + 'px',  
		'height'    : 'auto',  
		'color'     : '#fff'
	});
	$("body").append($i);
	$i.animate({
		"opacity": 0
	},
	3000,
	function() {
		//console.log($i.css());
		$i.remove();
		//alert('');
	});
}     
</script>

<!-- çª—å£å¤±å»ç„¦ç‚¹ -- åˆ«èµ°å•Š -->
<!-- çª—å£è·å¾—ç„¦ç‚¹ -- æ¢å¤ -->
<!-- console æ‰“å°figlet-->
<script>
var titleOnFocus = document.title;
var titleOnBlur = "...(*ï¿£ï¼ï¿£)ãƒ[åˆ«èµ°å•Šâ€¦]";
window.onfocus =function(){
    document.title = titleOnFocus;
    //console.log(titleOnFocus);
}
window.onblur = function(){
    document.title = titleOnBlur;
    //console.log(titleOnBlur);
}

var figlet = "\n" +
"        _          _            _               \n" +
"       (_)        | |          | |              \n" +
"  _ __  _  ___ ___| | ___  ___ | |_ ___  _ __   \n" +
" | '_ \\| |/ __/ _ \\ |/ _ \\/ _ \\| __/ _ \\| '_ \\  \n" +
" | | | | | (_|  __/ |  __/  __/| || (_) | |_) | \n" +
" |_| |_|_|\\___\\___|_|\\___|\\___(_)__\\___/| .__/  \n" +
"                                        | |     \n" +
"                                        |_|     \n" ;
console.log(figlet);
// console.log("%cline1\nline2", "color:red;font-size: 50px;font-weight:bold;");

/* é˜²hentai
document.onkeydown=function(){
    var e = window.event||arguments[0];
    if(e.keyCode==123){
    	alert('è¯·å°Šé‡åŠ³åŠ¨æˆæœï¼');
            return false;
    }else if((e.ctrlKey)&&(e.shiftKey)&&(e.keyCode==73)){
    	alert('è¯·å°Šé‡åŠ³åŠ¨æˆæœï¼');
            return false;
    }else if((e.ctrlKey)&&(e.keyCode==85)){
            alert('è¯·å°Šé‡åŠ³åŠ¨æˆæœï¼');
            return false;
    }else if((e.ctrlKey)&&(e.keyCode==83)){
           alert('è¯·å°Šé‡åŠ³åŠ¨æˆæœï¼');
           return false;
    }
}
document.oncontextmenu=function(){
	alert('è¯·å°Šé‡åŠ³åŠ¨æˆæœï¼');
    return false;
}*/
</script>

<!-- live2d Begin-->
<script type="text/javascript">
    var message_Path = '/sources/live2d/'
    var home_Path = 'https://nicelee.top/'
</script>
<script type="text/javascript" src="/sources/live2d/js/live2d.js"></script>
<script type="text/javascript" src="/sources/live2d/js/message.js"></script>
<script type="text/javascript">
    var modelList = ["kesshouban_v2", "tia", "wanko", "index", "kanna", "koharu", "umaru", 
	"22.closet.default.v2", 
	"22.closet.2018.bls-summer", 
	"22.closet.2019.summer", 
	"33.closet.2016.xmas", 
	"33.closet.2017.tomo-bukatsu", 
	"33.closet.2018.bls-summer", 
	"33.closet.2018.bls-winter", 
	"33.closet.default.v2" ];    
    var model = modelList[12]; 
    // kesshouban_v2 è¡€å°æ¿
    // tia  å°æ”¹æ”¹
    // wanko å°ç‹—ç‹— 
    // index é­”ç¦-èŒµè’‚å…‹ä¸
    // kanna åº·å¨œé¾™
    // koharu å¡å“‡ä¼Šçš„Qç‰ˆæ¨¡å‹
    // umaru å¹²ç‰©å¦¹å°åŸ‹ å¸¦å£°éŸ³
    // 22 å“”å“©å“”å“©22å¨˜
    // 22.v2 å“”å“©å“”å“©22å¨˜
    console.log("live2dæ¨¡å‹(å°éƒ¨åˆ†)æ¥è‡ªå®˜ç½‘: http://www.live2d.com/usermanual/cubism2_cn/samples.html");
    console.log("live2dæ¨¡å‹(å¤§éƒ¨åˆ†)æ¥è‡ªæ¢¦è±¡: https://mx-model.ga/");
    if( window.document.body.offsetWidth >= 666){
        loadlive2d("live2d", "/sources/live2d/model/"+ model +"/model.json");
    }else{
        //loadlive2d("live2d", "/sources/live2d/model/tia/model_tiny.json");
        loadlive2d("live2d", "/sources/live2d/model/"+ model +"/model_tiny.json");
    }
</script>
<!-- live2d End-->

<script type="text/javascript">
	var a_idx = 0;
	jQuery(document).ready(function($) {
		$("body").click(function(e) {
			var a = new Array("å¤§å‰å¤§åˆ©ï¼Œä»Šæ™šåƒé¸¡ï¼", "æƒŠä¸æƒŠå–œï¼Œæ„ä¸æ„å¤–", "è¿˜æœ‰è¿™ç§æ“ä½œï¼Ÿ", "å°çŒªä½©å¥‡èº«ä¸Šçº¹ï¼ŒæŒå£°é€ç»™ç¤¾ä¼šäºº", "ç¡®è®¤è¿‡çœ¼ç¥", "çš®ä¸€ä¸‹ï¼Œå¾ˆå¼€å¿ƒ", "å¾ˆå¥½å¾ˆå¼ºå¤§", "Cä½å‡ºé“", "ä½ è‹¥ç››å¼€ï¼Œæ¸…é£è‡ªæ¥", "å¦‚æœå¸…ä¹Ÿæ˜¯ä¸€ç§ç½ªï¼Œé‚£æˆ‘å·²ç½ªæ— å¯èµ¦", "åˆ«çœ‹èµ„æ–™ ï¼Œçœ‹èŠæ•ˆï¼", "æ„ŸåŠ¨å—ï¼Œä¸æ•¢åŠ¨", "æ‰“call", "æˆ‘æ˜¯ä½ çš„è¶…çº§è‹±é›„");
			var $i = $("<span/>").text(a[a_idx]);
			a_idx = (a_idx + 1) % a.length;
			var x = e.pageX,
			y = e.pageY;
			$i.css({
				"z-index": 999999999999999999999999999,
				"top": y - 20,
				"left": x,
				"position": "absolute",
				"font-weight": "bold",
				"color": "#dd3333"
			});
			$("body").append($i);
			$i.animate({
				"top": y - 180,
				"opacity": 0
			},
			1500,
			function() {
				$i.remove();
				//alert('');
			});
		});
	});
</script>


<script async src="/js/busuanzi.pure.mini.js "></script>


    <div class="back-to-top">
    <a href="#top" data-scroll>
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

    <script src="/js/main.js " charset="utf-8"></script>
    <script src="/js/smooth-scroll.min.js " charset="utf-8"></script>
    <script type="text/javascript">
      smoothScroll.init({
        speed: 500, // Integer. How fast to complete the scroll in milliseconds
        easing: 'easeInOutCubic', // Easing pattern to use
        offset: 20, // Integer. How far to offset the scrolling anchor location in pixels
      });
      // ä¸ºäº†åº•éƒ¨å†…å®¹ä¸è¢«é®ä½
      $(document).ready(function () {
        resizeBody();
      });
      window.onresize = resizeBody;
      function resizeBody(){
        //console.log("resizing Body...");
        if (window.innerWidth <= 770) {
            var totalHeight = $("header#top").height() + $(".page.clearfix").height() + $("footer.site-footer").height() +80;
            document.body.style.height = totalHeight + "px";
        }else{
            document.body.style.height = "auto";
        }
      }
    </script>
	
	
    <!-- <script src=" /js/scroll.min.js " charset="utf-8"></script> -->
  </body>

</html>
